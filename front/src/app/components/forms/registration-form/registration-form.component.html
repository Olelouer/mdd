<form (ngSubmit)="registrationForm.form.valid && onSubmit()" id="registrationForm" #registrationForm="ngForm"
    novalidate>
    <div class="main-input">
        <label for="username">Nom d’utilisateur</label>
        <input type="text" id="username" name="username" [(ngModel)]="registrationData.username" #username="ngModel"
            required minlength="3" [ngClass]="{ 'is-invalid': registrationForm.submitted && username.invalid }">

        @if (registrationForm.submitted && username.invalid) {
        <div class="invalid-feedback">
            @if (username.errors?.['required']) {
            <div>Le nom d'utilisateur est requis.</div>
            }
            @if (username.errors?.['minlength']) {
            <div>Doit contenir au moins 3 caractères.</div>
            }
        </div>
        }
    </div>

    <div class="main-input">
        <label for="email">Adresse e-mail</label>
        <input type="email" id="email" name="email" [(ngModel)]="registrationData.email" #email="ngModel" required email
            [ngClass]="{ 'is-invalid': registrationForm.submitted && email.invalid }">

        @if (registrationForm.submitted && email.invalid) {
        <div class="invalid-feedback">
            @if (email.errors?.['required']) {
            <div>L'adresse e-mail est requise.</div>
            }
            @if (email.errors?.['email']) {
            <div>Format d'e-mail invalide.</div>
            }
        </div>
        }
    </div>

    <div class="main-input">
        <label for="password">Mot de passe</label>
        <input type="password" id="password" name="password" [(ngModel)]="registrationData.password" #password="ngModel"
            required minlength="8" [ngClass]="{ 'is-invalid': registrationForm.submitted && password.invalid }">

        @if (registrationForm.submitted && password.invalid) {
        <div class="invalid-feedback">
            @if (password.errors?.['required']) {
            <div>Le mot de passe est requis.</div>
            }
            @if (password.errors?.['minlength']) {
            <div>Doit contenir au moins 8 caractères.</div>
            }
            @if (password.errors?.['pattern']) {
            <div>Doit contenir majuscule, minuscule, chiffre et caractère spécial.</div>
            }
        </div>
        }
    </div>

    <button class="-small" mat-button type="submit" [disabled]="isLoading">
        @if (isLoading) {
        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
        <span> Inscription...</span>
        } @else {
        <span>S'inscrire</span>
        }
    </button>
</form>